<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A2Z DSA Course Roadmap</title>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --tertiary-color: #16a085;
            --tertiary-hover-color: #1abc9c;
            --light-gray: #f8f9fa;
            --medium-gray: #e9ecef;
            --dark-gray: #495057;
            --text-color: #343a40;
            --border-color: #dee2e6;
            --white-color: #ffffff;
            --link-color: var(--secondary-color);
            --success-color: #2ecc71;
            --warning-color: #f1c40f;
            --danger-color: #e74c3c;
            --completed-bg-color: #e8f5e9;
            --completed-text-color: #388e3c;
            --completed-gradient-start: #27ae60;
            --completed-gradient-end: #2ecc71;
        }

        /* General Body Styling */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.5;
            background-color: var(--light-gray);
            color: var(--text-color);
            margin: 0;
            padding: 1rem;
        }

        /* Main Container for the Roadmap */
        .container {
            max-width: 1200px;
            margin: 1rem auto;
            background-color: var(--white-color);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--border-color);
        }

        /* Heading Styles */
        h1 {
            text-align: center;
            font-size: 2rem;
            color: var(--primary-color);
            border-bottom: 2px solid var(--medium-gray);
            padding-bottom: 0.6rem;
            margin-bottom: 1rem;
        }

        /* Collapsible Section Styles */
        .collapsible,
        .sub-collapsible {
            color: #fff;
            cursor: pointer;
            padding: 0.75rem 1rem;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            margin-top: 0.75rem;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-image 0.3s ease;
        }

        .collapsible {
            background-image: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
            font-size: 1.5rem;
        }

        .sub-collapsible {
            background-image: linear-gradient(45deg, var(--tertiary-color), var(--tertiary-hover-color));
            font-size: 1.2rem;
        }

        .collapsible:hover,
        .collapsible.active {
            background-image: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
        }

        .sub-collapsible:hover,
        .sub-collapsible.active {
            background-image: linear-gradient(45deg, var(--tertiary-hover-color), var(--tertiary-color));
        }

        .collapsible.completed,
        .sub-collapsible.completed {
            background-image: linear-gradient(45deg, var(--completed-gradient-start), var(--completed-gradient-end));
        }

        .collapsible-title {
            flex-grow: 1;
        }

        .progress-counter {
            font-size: 0.7em;
            font-weight: 500;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 0.2rem 0.6rem;
            border-radius: 1rem;
            margin-left: 1rem;
            white-space: nowrap;
        }

        .collapsible::after,
        .sub-collapsible::after {
            content: '+';
            font-size: 1.5em;
            font-weight: bold;
            transition: transform 0.3s ease;
            margin-left: 1rem;
        }

        .collapsible.active::after,
        .sub-collapsible.active::after {
            transform: rotate(45deg);
        }

        .content,
        .sub-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out;
            background-color: transparent;
        }

        .content {
            border-radius: 0 0 8px 8px;
            border-top: none;
            padding: 0 0.5rem;
        }

        /* Table Styling */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 0.75rem 0;
            border: 1px solid var(--border-color);
            table-layout: fixed;
        }

        th,
        td {
            border: 1px solid var(--border-color);
            padding: 0.5rem 0.4rem;
            text-align: center;
            vertical-align: middle;
            word-wrap: break-word;
        }

        .topic-cell {
            text-align: left;
            font-weight: 500;
            width: 40%;
        }

        thead th:not(:first-child),
        tbody td:not(.topic-cell) {
            width: 8.57%;
        }

        .topic-title {
            font-size: 0.95rem;
            padding: 0.5rem;
        }

        thead th {
            background-color: var(--secondary-color);
            color: #fff;
            font-weight: 600;
        }

        /* Difficulty & Completion Styles */
        tr.completed {
            background-color: var(--completed-bg-color) !important;
            color: var(--completed-text-color);
        }

        tr.completed a {
            color: var(--completed-text-color);
            font-weight: 500;
        }

        .difficulty-easy td:first-child {
            box-shadow: inset 4px 0 0 0 var(--success-color);
        }

        .difficulty-medium td:first-child {
            box-shadow: inset 4px 0 0 0 var(--warning-color);
        }

        .difficulty-hard td:first-child {
            box-shadow: inset 4px 0 0 0 var(--danger-color);
        }

        /* Link & SVG Styling */
        .link-cell {
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .link-cell:hover {
            background-color: var(--medium-gray);
        }

        .link-cell a {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: -0.5rem -0.4rem;
            padding: 0.5rem 0.4rem;
            color: var(--link-color);
            text-decoration: none;
            height: 100%;
        }

        .link-cell svg {
            width: 22px;
            height: 22px;
            fill: currentColor;
        }

        /* 'Not Applicable' Cell Styling */
        .na-cell {
            color: #bdc3c7;
            font-size: 1.2rem;
            font-weight: 600;
        }

        /* Custom Checkbox */
        .status-cell {
            cursor: pointer;
        }

        .status-checkbox {
            pointer-events: none;
            width: 1.2rem;
            height: 1.2rem;
        }
    </style>
</head>

<body>
    <div id="roadmap-container" class="container">
        <h1>Loading Roadmap...</h1>
    </div>
    <script>
        const STORAGE_KEY = 'dsaRoadmapProgress';

        // SVG logos for platforms, standardized to 24x24px
        const platformLogos = {
            'Post': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48">
                                <linearGradient id="PwyZ_DTfRgFdHLU07K2AAa_GsMdC9NCKCAD_gr1" x1="-357.996" x2="-326.98" y1="-2.256" y2="28.759" gradientTransform="translate(364.481 8.739)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#ff975f"></stop>
                                    <stop offset="1" stop-color="#ff7930"></stop>
                                </linearGradient>
                                <path fill="url(#PwyZ_DTfRgFdHLU07K2AAa_GsMdC9NCKCAD_gr1)" d="M6,9.446v29.105c0,1.901,1.544,3.445,3.445,3.445h29.111c1.901,0,3.445-1.544,3.445-3.445V9.446c0-1.901-1.544-3.445-3.445-3.445H9.446C7.544,6.001,6,7.545,6,9.446z"></path>
                                <path fill="#fff" fill-rule="evenodd" d="M13.001,29.999l-0.001-12c0-3.312,2.689-6,6.001-6h5.999c3.312,0,6.001,2.688,6.001,6l-0.001,3c0,1.104,0.897,2.001,2.001,2.001s2,0.895,2,1.999c0,0.731,0.001,3.789,0.001,5c0,3.312-2.689,6-6.001,6h-9.999C15.69,35.999,13.001,33.311,13.001,29.999z M29.001,27.999c0-1.103-0.897-2-2-2h-7c-1.104,0-2,0.897-2,2c0,1.104,0.896,2,2,2h7C28.103,29.999,29.001,29.103,29.001,27.999z M27.013,18.999c0-1.103-0.897-2-2-2h-5.024c-1.104,0-2,0.897-2,2c0,1.104,0.896,2,2,2h5.024C26.115,20.999,27.013,20.103,27.013,18.999z" clip-rule="evenodd"></path>
                            </svg>`,
            'YT': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48">
                                <path fill="#FF3D00" d="M43.2,33.9c-0.4,2.1-2.1,3.7-4.2,4c-3.3,0.5-8.8,1.1-15,1.1c-6.1,0-11.6-0.6-15-1.1c-2.1-0.3-3.8-1.9-4.2-4C4.4,31.6,4,28.2,4,24c0-4.2,0.4-7.6,0.8-9.9c0.4-2.1,2.1-3.7,4.2-4C12.3,9.6,17.8,9,24,9c6.2,0,11.6,0.6,15,1.1c2.1,0.3,3.8,1.9,4.2,4c0.4,2.3,0.9,5.7,0.9,9.9C44,28.2,43.6,31.6,43.2,33.9z"></path>
                                <path fill="#FFF" d="M20 31L20 17 32 24z"></path>
                            </svg>`,
            'TUF': `<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 128.000000 128.000000" preserveAspectRatio="xMidYMid meet">
<g transform="translate(0.000000,128.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
    <path d="M515 1266 c-97 -23 -168 -53 -242 -105 -115 -81 -195 -189 -240 -325
-22 -69 -27 -98 -27 -196 0 -98 5 -127 27 -196 47 -141 131 -252 254 -334 112
-75 210 -104 353 -104 98 0 127 4 197 28 195 64 345 215 410 410 22 69 27 98
27 196 0 98 -5 127 -27 196 -47 141 -131 252 -254 334 -135 90 -331 130 -478
96z m-97 -493 c-3 -27 -5 -28 -70 -31 -55 -2 -68 -6 -68 -19 0 -9 -10 -67 -21
-130 l-21 -113 -49 0 c-26 0 -50 3 -53 8 -2 4 7 61 20 127 13 66 24 121 24
123 0 1 -29 2 -65 2 -36 0 -65 3 -65 8 0 4 3 17 6 30 6 22 8 22 186 22 l179 0
-3 -27z m134 22 c3 -3 -4 -55 -14 -116 -11 -60 -17 -116 -14 -124 4 -11 23
-15 70 -15 74 0 67 -10 91 125 25 147 18 135 77 135 l51 0 -7 -47 c-3 -26 -16
-98 -27 -160 l-21 -113 -138 0 -139 0 -34 43 -35 42 19 105 c10 58 21 111 24
118 4 12 86 18 97 7z m648 -12 c0 -10 -3 -35 -6 -55 l-7 -38 -54 0 c-54 0 -55
1 -49 25 6 25 6 25 -63 25 -77 0 -85 -6 -94 -62 l-6 -38 131 0 c115 0 129 -2
124 -16 -3 -9 -6 -20 -6 -25 0 -5 -57 -9 -129 -9 l-128 0 -9 -52 -9 -53 -44
-3 c-24 -2 -47 0 -52 5 -4 4 1 58 12 118 20 110 20 110 67 152 l47 42 138 1
c124 0 137 -2 137 -17z" />
</g>
</svg>`,
            'GFG': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 76.533 39.026">
                                <path d="M2380.7,6597.866a12.252,12.252,0,0,0-.261-1.513l-30.726-.027a12.545,12.545,0,0,1,.908-3.443,12.337,12.337,0,0,1,2.739-4.044,12.151,12.151,0,0,1,4.018-2.581,12.634,12.634,0,0,1,14.3,3.051l4.852-4.748a18.176,18.176,0,0,0-6.131-4.331,20.037,20.037,0,0,0-8.112-1.564,20.25,20.25,0,0,0-7.671,1.459,19.158,19.158,0,0,0-6.261,4.07,19.584,19.584,0,0,0-4.226,6.184,18.7,18.7,0,0,0-1.487,5.947h-.2a18.674,18.674,0,0,0-1.489-5.947,19.544,19.544,0,0,0-4.226-6.184,19.133,19.133,0,0,0-6.261-4.07,21.354,21.354,0,0,0-15.783.1,18.2,18.2,0,0,0-6.131,4.331l4.853,4.748a13.264,13.264,0,0,1,14.3-3.051,12.131,12.131,0,0,1,4.017,2.581,12.323,12.323,0,0,1,2.74,4.044,12.527,12.527,0,0,1,.908,3.443l-30.726.027a12.256,12.256,0,0,0-.261,1.513,15,15,0,0,0-.1,1.773,20.713,20.713,0,0,0,1.1,6.783,15.709,15.709,0,0,0,3.443,5.686,17.309,17.309,0,0,0,6,4.123,20.587,20.587,0,0,0,7.983,1.46,20.226,20.226,0,0,0,7.669-1.46,19.086,19.086,0,0,0,6.261-4.07,19.506,19.506,0,0,0,4.226-6.184,18.163,18.163,0,0,0,1.153-3.629h.871a18.27,18.27,0,0,0,1.151,3.629,19.545,19.545,0,0,0,4.226,6.184,19.111,19.111,0,0,0,6.261,4.07,20.241,20.241,0,0,0,7.671,1.46,20.572,20.572,0,0,0,7.981-1.46,17.282,17.282,0,0,0,6-4.123,15.717,15.717,0,0,0,3.445-5.686,20.726,20.726,0,0,0,1.1-6.783A15.259,15.259,0,0,0,2380.7,6597.866Zm-46.245,5.608a12.1,12.1,0,0,1-2.766,4.043,12.467,12.467,0,0,1-4.043,2.583,14.378,14.378,0,0,1-9.939.052,11.776,11.776,0,0,1-3.522-2.218,8.459,8.459,0,0,1-1.8-2.374,13.476,13.476,0,0,1-1.173-3.208l23.658,0A11.487,11.487,0,0,1,2334.457,6603.475Zm38.236,2.086a8.466,8.466,0,0,1-1.8,2.374,11.771,11.771,0,0,1-3.522,2.218,14.378,14.378,0,0,1-9.939-.052,12.491,12.491,0,0,1-4.044-2.583,12.088,12.088,0,0,1-2.765-4.043,11.427,11.427,0,0,1-.415-1.126h11.92v0h11.739A13.509,13.509,0,0,1,2372.692,6605.561Z" transform="translate(-2304.273 -6578.666)" fill="#2f8d46"></path>
                            </svg>`,
            'CN': `<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 203.000000 203.000000" preserveAspectRatio="xMidYMid meet">
                                <g transform="translate(0.000000,203.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
                                    <path d="M844 2015 c-221 -40 -388 -127 -545 -284 -181 -181 -281 -402 -296 -656 -24 -421 222 -822 605 -985 150 -64 211 -75 402 -75 152 0 186 3 260 23 176 48 325 135 456 266 131 131 218 280 266 456 20 74 23 108 23 260 0 153 -3 185 -23 254 -65 224 -177 396 -347 532 -223 179 -528 259 -801 209z m696 -550 l0 -155 -356 0 c-238 0 -369 -4 -395 -11 -97 -30 -149 -119 -149 -258 0 -103 22 -173 68 -219 60 -60 79 -62 476 -62 l356 0 0 -170 0 -170 -382 0 c-414 0 -439 3 -544 56 -66 33 -143 112 -178 182 -57 112 -85 311 -66 469 21 178 75 303 164 379 51 44 146 90 211 102 28 5 218 10 423 11 l372 1 0 -155z m-471 -441 c15 -15 -127 -94 -169 -94 -53 0 -118 63 -135 131 l-6 26 153 -29 c84 -16 155 -31 157 -34z m415 29 c-19 -82 -60 -123 -122 -123 -31 0 -143 52 -162 75 -15 19 -16 19 130 49 157 33 162 33 154 -1z"/>
                                </g>
                            </svg>`,
            'LC': `<svg width="24" height="24" viewBox="0 0 26 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip0_49_338)">
                                    <path d="M23.8334 16.2886C23.8334 15.4848 23.2224 14.8315 22.4684 14.8315H11.5657C10.8117 14.8315 10.2007 15.4859 10.2007 16.2886C10.2007 17.0925 10.8117 17.7468 11.5657 17.7468H22.4684C23.2224 17.7468 23.8334 17.0935 23.8334 16.2886Z" fill="#B3B1B0"></path>
                                    <path d="M23.8334 16.2886H10.2007C10.2007 17.0924 10.8117 17.7467 11.5657 17.7467H22.4684C23.2224 17.7467 23.8334 17.0935 23.8334 16.2886Z" fill="#9C9A99"></path>
                                    <path d="M5.17923 16.2886H5.12939C5.14564 17.0859 5.47064 17.8854 6.10114 18.5289C7.51923 19.9762 8.96006 21.3997 10.3911 22.8341L10.6121 23.0486C11.1202 23.3768 11.1246 24.4027 10.8093 24.8588C10.4735 25.3452 10.0401 25.6486 9.43239 25.6486C9.41073 25.6486 9.38798 25.6486 9.36523 25.6475C9.14856 25.6399 8.97089 25.5532 8.79106 25.4514C8.75314 25.4297 8.71523 25.4081 8.67839 25.3842C9.70973 26.2964 11.0726 26.7373 12.5654 26.7373C14.1731 26.7373 15.6312 26.1837 16.6864 25.1188L19.4911 22.2621C20.0436 21.7052 20.0241 20.7833 19.4489 20.2037C19.1542 19.9058 18.7696 19.7563 18.3894 19.7563C18.0297 19.7563 17.6755 19.8907 17.4079 20.1615L14.5089 22.9857C14.0084 23.4917 13.3151 23.7029 12.5502 23.7029C11.7854 23.7029 11.0921 23.4917 10.5894 22.9857L5.93431 18.2592C5.44248 17.763 5.18898 17.0437 5.17923 16.2886Z" fill="#C98F1B"></path>
                                    <path d="M5.12939 16.2886H2.07764C2.08414 17.8973 2.72222 19.479 3.96155 20.7313C5.39589 22.1787 6.83997 23.6162 8.27755 25.0603C8.39997 25.1838 8.53322 25.2932 8.67839 25.3853C8.71522 25.4081 8.75205 25.4308 8.79105 25.4525C8.97089 25.5543 9.14855 25.641 9.36522 25.6486C9.38797 25.6497 9.40964 25.6497 9.43239 25.6497C10.0401 25.6497 10.4735 25.3463 10.8093 24.8599C11.1246 24.4038 11.1191 23.3779 10.6121 23.0497L10.3911 22.8352C8.96005 21.4008 7.51814 19.9773 6.10114 18.53C5.47064 17.8865 5.14564 17.0859 5.12939 16.2886Z" fill="#060605"></path>
                                    <path d="M3.77309 20.44L8.44442 25.1644C9.49742 26.225 10.9556 26.7374 12.5654 26.7374C14.1731 26.7374 15.6313 26.1838 16.6864 25.1189L19.4912 22.2621C20.0437 21.7053 20.0242 20.7834 19.4489 20.2038C18.8748 19.6242 17.9593 19.6047 17.4079 20.1615L14.5089 22.9858C14.0084 23.4917 13.3151 23.703 12.5503 23.703C11.7854 23.703 11.0921 23.4917 10.5894 22.9858L5.93434 18.2592C5.43275 17.7522 5.17925 17.0134 5.17925 16.241C5.17925 15.4685 5.43275 14.7709 5.93434 14.265L10.5764 9.51995C11.0791 9.01295 11.7854 8.8212 12.5503 8.8212C13.3162 8.8212 14.0095 9.03245 14.5089 9.53837L17.4079 12.3615C17.9604 12.9195 18.8748 12.9 19.45 12.3204C20.0253 11.7397 20.0448 10.8189 19.4923 10.261L16.6875 7.40637C15.9855 6.70653 15.0939 6.19737 14.0962 5.96554L14.0604 5.95903L16.7113 3.24637C17.266 2.68953 17.2465 1.76653 16.6713 1.18695C16.0971 0.607368 15.1806 0.587868 14.627 1.14578L3.77309 12.0864C2.71792 13.1502 2.1665 14.6192 2.1665 16.242C2.1665 17.8649 2.71792 19.3772 3.77309 20.44Z" fill="#E7A41F"></path>
                                    <path d="M8.79117 25.4525C8.6005 25.3474 8.4315 25.2153 8.27767 25.0614C6.84008 23.6174 5.396 22.1798 3.96167 20.7325C1.808 18.556 1.46783 15.3851 3.11125 12.8025C3.36475 12.4016 3.68433 12.0506 4.02017 11.7148C7.4955 8.23295 10.9698 4.74895 14.4451 1.26712C15.1222 0.588949 16.0668 0.560782 16.6973 1.19562C17.3029 1.80445 17.2683 2.77187 16.6139 3.4327C15.7798 4.27337 14.9456 5.11187 14.1114 5.95145C14.067 6.08362 13.9598 6.16812 13.8666 6.26237C12.9317 7.21245 11.9697 8.13653 11.0499 9.09962C10.9297 9.2242 10.7661 9.30112 10.6469 9.43003C9.10533 10.9716 7.54642 12.4959 6.0265 14.058C4.79583 15.3223 4.83917 17.2409 6.10017 18.53C7.51825 19.9774 8.95908 21.4009 10.3902 22.8352L10.6112 23.0497C11.1193 23.378 11.1236 24.4039 10.8083 24.86C10.4606 25.3648 10.0078 25.6725 9.36425 25.6486C9.14867 25.64 8.971 25.5533 8.79117 25.4525Z" fill="#070706"></path>
                                    <path d="M14.1062 5.96547C14.0585 6.09005 13.9567 6.1713 13.8667 6.26122C12.9318 7.2113 11.9698 8.13539 11.0501 9.09847C10.9298 9.22305 10.7662 9.29997 10.6471 9.42889C9.10549 10.9705 7.54658 12.4947 6.02666 14.0569C5.39833 14.7026 5.10258 15.5183 5.13074 16.3341H5.18058C5.17949 16.3026 5.17841 16.2712 5.17841 16.2398C5.17841 15.4674 5.43191 14.7697 5.93349 14.2638L10.5756 9.5188C11.0782 9.0118 11.7846 8.82005 12.5494 8.82005C13.3153 8.82005 14.0087 9.0313 14.5081 9.53722L17.4071 12.3604C17.6757 12.6323 18.0311 12.7666 18.3907 12.7666C18.7699 12.7666 19.1545 12.6171 19.4492 12.3192C20.0244 11.7386 20.0439 10.8177 19.4914 10.2598L16.6867 7.40522C15.9868 6.70647 15.0996 6.19839 14.1062 5.96547ZM15.6001 0.737305C15.3899 0.738388 15.1819 0.786055 14.9912 0.880305C15.1895 0.790388 15.3964 0.742721 15.6001 0.737305Z" fill="#EAB03C"></path>
                                    <path d="M15.6347 0.737305C15.6239 0.737305 15.612 0.737305 15.6011 0.737305C15.3964 0.741638 15.1906 0.790388 14.9923 0.880305C14.7995 0.968055 14.6142 1.09697 14.4463 1.26597C10.971 4.7478 7.49564 8.2318 4.02139 11.7136C3.68556 12.0495 3.36706 12.4005 3.11247 12.8013C2.40614 13.9117 2.06597 15.1316 2.07897 16.3351H5.13181C5.10364 15.5194 5.40047 14.7036 6.02772 14.058C7.54656 12.4958 9.10656 10.9716 10.6481 9.42997C10.7684 9.30105 10.9309 9.22522 11.0511 9.09955C11.9709 8.13647 12.9329 7.21239 13.8678 6.2623C13.9577 6.1713 14.0596 6.09005 14.1072 5.96655C14.1094 5.96114 14.1105 5.9568 14.1126 5.95139C14.9468 5.1118 15.781 4.2733 16.6151 3.43264C17.2695 2.7718 17.3052 1.80439 16.6986 1.19555C16.3941 0.888971 16.0182 0.737305 15.6347 0.737305Z" fill="#272726"></path>
                                </g>
                                <defs>
                                    <clipPath id="clip0_49_338">
                                        <rect width="26" height="26" fill="white" transform="translate(0 0.737305)"></rect>
                                    </clipPath>
                                </defs>
                            </svg>`
        };

        document.addEventListener('DOMContentLoaded', () => {
            fetch('a2z.json').then(response => {
                if (!response.ok) throw new Error('Network response was not ok. Make sure a2z.json is in the same folder.');
                return response.json();
            }).then(roadmapData => {
                const progress = loadCompletionState();
                generateRoadmap(roadmapData, progress);
                addEventListeners();
            }).catch(handleError);
        });

        function generateRoadmap(data, progress) {
            const container = document.getElementById('roadmap-container');
            let htmlContent = `<h1>A2Z DSA Course Roadmap</h1>`;
            data.forEach(step => {
                let totalStepTopics = 0;
                let completedStepTopics = 0;
                let subStepsHtml = '';
                if (step.sub_steps) {
                    step.sub_steps.forEach(subStep => {
                        const totalSubStepTopics = subStep.topics.length;
                        const completedSubStepTopics = subStep.topics.filter(t => progress[t.id]).length;
                        const isSubStepComplete = totalSubStepTopics > 0 && completedSubStepTopics === totalSubStepTopics;
                        const subStepCompletedClass = isSubStepComplete ? 'completed' : '';
                        totalStepTopics += totalSubStepTopics;
                        completedStepTopics += completedSubStepTopics;

                        subStepsHtml += `
                                <button type="button" class="sub-collapsible ${subStepCompletedClass}" data-step="${step.step_no}" data-substep="${subStep.sub_step_no}">
                                    <span class="collapsible-title">${subStep.sub_step_no}. ${subStep.sub_step_title.replace(/\n/g, ' ')}</span>
                                    <span class="progress-counter">${completedSubStepTopics}/${totalSubStepTopics}</span>
                                </button>
                                <div class="sub-content">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Topic</th>
                                                <th title="Article/Post">Post</th>
                                                <th title="YouTube">YT</th>
                                                <th title="TakeUForward+">TUF</th>
                                                <th title="GeeksForGeeks">GFG</th>
                                                <th title="CodingNinjas">CN</th>
                                                <th title="LeetCode">LC</th>
                                                <th>Done</th>
                                            </tr>
                                        </thead>
                                        <tbody>`;
                        subStep.topics.forEach(topic => {
                            const isCompleted = progress[topic.id] || false;
                            const difficultyClass = getDifficultyClass(topic.difficulty);
                            const completedClass = isCompleted ? 'completed' : '';
                            const checkedAttr = isCompleted ? 'checked' : '';
                            let tooltipText = '';
                            if (topic.ques_topic) {
                                try {
                                    const topics = JSON.parse(topic.ques_topic);
                                    tooltipText = topics.map(t => t.label).join(', ');
                                } catch (e) { /* Gracefully fail */ }
                            }
                            subStepsHtml += `
                                            <tr class="${difficultyClass} ${completedClass}" data-topic-id="${topic.id}">
                                                <td class="topic-cell" title="${tooltipText}">
                                                    <div class="topic-title">${topic.question_title}</div>
                                                </td>
                                                ${createLinkCell(topic.post_link, 'Post')}
                                                ${createLinkCell(topic.yt_link, 'YT')}
                                                ${createLinkCell(topic.plus_link, 'TUF')}
                                                ${createLinkCell(topic.gfg_link, 'GFG')}
                                                ${createLinkCell(topic.cs_link, 'CN')}
                                                ${createLinkCell(topic.lc_link, 'LC')}
                                                <td class="status-cell">
                                                    <input type="checkbox" class="status-checkbox" data-id="${topic.id}" ${checkedAttr}>
                                                </td>
                                            </tr>`;
                        });
                        subStepsHtml += `
                                        </tbody>
                                    </table>
                                </div>`;
                    });
                }
                const isStepComplete = totalStepTopics > 0 && completedStepTopics === totalStepTopics;
                const stepCompletedClass = isStepComplete ? 'completed' : '';
                htmlContent += `
                            <button type="button" class="collapsible ${stepCompletedClass}" data-step="${step.step_no}">
                                <span class="collapsible-title">Step ${step.step_no}: ${step.step_title}</span>
                                <span class="progress-counter">${completedStepTopics}/${totalStepTopics}</span>
                            </button>
                            <div class="content">${subStepsHtml}</div>`;
            });
            container.innerHTML = htmlContent;
        }

        function createLinkCell(url, label) {
            if (url) {
                const logo = platformLogos[label] || label;
                return `
                                <td class="link-cell">
                                    <a href="${url}" target="_blank" rel="noopener noreferrer" title="${label}">${logo}</a>
                                </td>`;
            } else {
                return `<td class="na-cell">-</td>`;
            }
        }

        function getDifficultyClass(difficulty) {
            const difficultyMap = {
                0: 'difficulty-easy',
                1: 'difficulty-medium',
                2: 'difficulty-hard'
            };
            return difficultyMap[difficulty] || '';
        }

        function loadCompletionState() {
            try {
                const savedProgress = localStorage.getItem(STORAGE_KEY);
                return savedProgress ? JSON.parse(savedProgress) : {};
            } catch (e) {
                console.error("Failed to load progress from localStorage", e);
                return {};
            }
        }

        function saveCompletionState(progress) {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));
            } catch (e) {
                console.error("Failed to save progress to localStorage", e);
            }
        }

        function updateCounters(element) {
            const progress = loadCompletionState();
            const subStepContent = element.closest('.sub-content');
            if (subStepContent) {
                const subStepButton = subStepContent.previousElementSibling;
                const topicsInSubStep = Array.from(subStepContent.querySelectorAll('.status-checkbox'));
                const totalSubStep = topicsInSubStep.length;
                const completedSubStep = topicsInSubStep.filter(cb => progress[cb.dataset.id]).length;
                subStepButton.querySelector('.progress-counter').textContent = `${completedSubStep}/${totalSubStep}`;
                const isSubStepComplete = totalSubStep > 0 && completedSubStep === totalSubStep;
                subStepButton.classList.toggle('completed', isSubStepComplete);
            }
            const mainContent = element.closest('.content');
            if (mainContent) {
                const mainStepButton = mainContent.previousElementSibling;
                const topicsInStep = Array.from(mainContent.querySelectorAll('.status-checkbox'));
                const totalStep = topicsInStep.length;
                const completedStep = topicsInStep.filter(cb => progress[cb.dataset.id]).length;
                mainStepButton.querySelector('.progress-counter').textContent = `${completedStep}/${totalStep}`;
                const isStepComplete = totalStep > 0 && completedStep === totalStep;
                mainStepButton.classList.toggle('completed', isStepComplete);
            }
        }

        function addEventListeners() {
            const container = document.getElementById('roadmap-container');
            container.addEventListener('click', function(event) {
                const collapsible = event.target.closest('.collapsible, .sub-collapsible');
                const statusCell = event.target.closest('.status-cell');

                if (collapsible) {
                    collapsible.classList.toggle('active');
                    const content = collapsible.nextElementSibling;
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                        const parentContent = collapsible.closest('.content');
                        if (parentContent && parentContent.style.maxHeight) {
                            parentContent.style.maxHeight = (parseInt(parentContent.style.maxHeight) - content.scrollHeight) + "px";
                        }
                    } else {
                        content.style.maxHeight = content.scrollHeight + "px";
                        const parentContent = collapsible.closest('.content');
                        if (parentContent && parentContent.style.maxHeight) {
                            parentContent.style.maxHeight = (parseInt(parentContent.style.maxHeight) + content.scrollHeight) + "px";
                        }
                    }
                }

                if (statusCell) {
                    const checkbox = statusCell.querySelector('.status-checkbox');
                    if (checkbox) {
                        checkbox.checked = !checkbox.checked;
                        const topicId = checkbox.dataset.id;
                        const isChecked = checkbox.checked;
                        const progress = loadCompletionState();
                        progress[topicId] = isChecked;
                        saveCompletionState(progress);
                        const row = checkbox.closest('tr');
                        if (row) {
                            row.classList.toggle('completed', isChecked);
                        }
                        updateCounters(checkbox);
                    }
                }
            });
        }

        function handleError(error) {
            console.error('Error:', error);
            const container = document.getElementById('roadmap-container');
            container.innerHTML = `
                <h1>Error</h1>
                <p>Could not load the roadmap. Please ensure 'a2z.json' is in the same directory and correctly formatted.</p>
                <p><em>${error.message}</em></p>`;
        }
    </script>
</body>

</html>
